{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","react_default","a","createElement","className","type","value","this","props","content","onChange","changeTitle","bind","onKeyPress","submit","event","key","onSubmit","Component","TodoItem","checked","todo","status","toggle","title","onClick","delete","e","onToggle","onDelete","AV","require","init","appId","appKey","getCurrentUser","user","User","current","getUserFromAVUser","AVUser","Object","objectSpread","id","attributes","UserDialog","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","selected","formData","username","password","setState","target","_this2","preventDefault","_this$state$formData","successFn","errorFn","setUsername","setPassword","signUp","then","loggedInUser","error","onSignUp","code","alert","_this3","_this$state$formData2","logIn","signIn","onSignIn","stateCopy","JSON","parse","stringify","signUpForm","changeFormData","signInForm","switch","App","newTodo","todoList","todos","filter","item","deleted","map","index","src_TodoItem_0","signOut","src_TodoInput_0","addTodo","src_UserDialog_0","onSignUpOrSignIn","logOut","push","idMaker","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.0ae35ad6.chunk.js","sourcesContent":["import React,{ Component } from 'react';\nimport './TodoInput.css';\n\nclass TodoInput extends Component{\n  render(){\n    return (\n      <input className=\"TodoInput\" type=\"text\" value={this.props.content} \n        onChange={this.changeTitle.bind(this)}\n        onKeyPress={this.submit.bind(this)} />\n    )\n  }\n  submit(event){\n    if(event.key === 'Enter'){\n      this.props.onSubmit(event)\n    }\n  }\n  changeTitle(event){\n    this.props.onChange(event)\n  }\n}\n\nexport default TodoInput;","import React,{ Component } from 'react';\nimport './TodoItem.css';\n\nclass TodoItem extends Component{\n  render(){\n    return (\n      <div className=\"TodoItem\">\n        <input type=\"checkbox\" checked={this.props.todo.status === 'completed'} \n          onChange={this.toggle.bind(this)} /> \n        <span className=\"title\">{this.props.todo.title}</span>\n        <button onClick={this.delete.bind(this)}>删除</button>\n      </div>\n    )\n  }\n  toggle(e){\n    this.props.onToggle(e, this.props.todo)\n  }\n  delete(e){\n    this.props.onDelete(e, this.props.todo)\n  }\n}\n\nexport default TodoItem;\n","var AV = require('leancloud-storage');\n\nvar APP_ID = 'cYc0s0wraLNbPuKaAmN2smLT-gzGzoHsz';\nvar APP_KEY = '20F8YLbSIRQiopXIScbF6apv';\n\nAV.init({\n  appId: APP_ID,\n  appKey: APP_KEY\n});\n\nexport default AV\n\nexport function signUp(username, password, successFn, errorFn){\n  var user = new AV.User()\n  user.setUsername(username)\n  user.setPassword(password)\n  user.signUp().then(function(loggedInUser){\n    let user = getUserFromAVUser(loggedInUser)\n    successFn.call(null, user)\n  }, function(error){\n    errorFn.call(null, error)\n  })\n}\nexport function signIn(username, password, successFn, errorFn){\n  AV.User.logIn(username, password).then(function(loggedInUser){\n    let user = getUserFromAVUser(loggedInUser)\n    successFn.call(null, user)\n  }, function(error){\n    errorFn.call(null, error)\n  })\n}\nexport function getCurrentUser(){\n  let user = AV.User.current();\n  if (user){\n    return getUserFromAVUser(user)\n  }else{\n    return null\n  }\n}\nexport function signOut(){\n  AV.User.logOut()\n  return undefined\n}\nfunction getUserFromAVUser(AVUser){\n  return {\n    id: AVUser.id,\n    ...AVUser.attributes\n  }\n}\n","import React, { Component } from 'react';\r\nimport './UserDialog.css';\r\nimport { signUp, signIn } from './leanCloud'\r\n\r\nclass UserDialog extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      selected: 'signUp',\r\n      formData: {\r\n        username: '',\r\n        password: '',\r\n      }\r\n    }\r\n  }\r\n  switch(e){\r\n    this.setState({\r\n      selected: e.target.value\r\n    })\r\n  }\r\n  signUp(e){\r\n    e.preventDefault()\r\n    let {username, password} = this.state.formData\r\n    let success = (user)=>{\r\n      this.props.onSignUp(user)\r\n    }\r\n    let error = (error)=>{\r\n      switch(error.code){\r\n        case 202:\r\n          alert('用户名已被占用')\r\n          break\r\n        default:\r\n          alert(error)\r\n          break\r\n      }\r\n    }\r\n    signUp(username, password, success, error)\r\n  }\r\n  signIn(e){\r\n    e.preventDefault()\r\n    let {username, password} = this.state.formData\r\n    let success = (user)=>{\r\n      this.props.onSignIn.call(null, user)\r\n    }\r\n    let error = (error)=>{\r\n      switch(error.code){\r\n        case 210:\r\n          alert('用户名与密码不匹配')\r\n          break\r\n        default:\r\n          alert(error)\r\n          break\r\n      }\r\n    }\r\n    signIn(username, password, success, error)\r\n  }\r\n  changeFormData(key, e){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.formData[key] = e.target.value\r\n    this.setState(stateCopy)\r\n  }\r\n  render(){\r\n    let signUpForm = (\r\n      <form className=\"signUp\" onSubmit={this.signUp.bind(this)}>\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={this.state.formData.username} \r\n            onChange={this.changeFormData.bind(this, 'username')} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.state.formData.password} \r\n            onChange={this.changeFormData.bind(this, 'password')} />\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">注册</button>\r\n        </div>\r\n      </form>\r\n    )\r\n    let signInForm = (\r\n      <form className=\"signIn\" onSubmit={this.signIn.bind(this)}>\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={this.state.formData.username}\r\n            onChange={this.changeFormData.bind(this, 'username')} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.state.formData.password}\r\n            onChange={this.changeFormData.bind(this, 'password')} />\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">登录</button>\r\n        </div>\r\n      </form>\r\n    )\r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n          <nav>\r\n            <label>\r\n              <input type=\"radio\" value=\"signUp\" \r\n                checked={this.state.selected === 'signUp'}\r\n                onChange={this.switch.bind(this)} \r\n              />注册\r\n            </label>\r\n            <label>\r\n              <input type=\"radio\" value=\"signIn\" \r\n                checked={this.state.selected === 'signIn'}\r\n                onChange={this.switch.bind(this)} \r\n              />登录\r\n            </label>\r\n          </nav>\r\n          <div className=\"panes\">\r\n            {this.state.selected === 'signUp' ? signUpForm : null}\r\n            {this.state.selected === 'signIn' ? signInForm : null}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserDialog;","import React,{ Component } from 'react';\nimport TodoInput from './TodoInput';\nimport TodoItem from './TodoItem';\nimport UserDialog from './UserDialog';\nimport { getCurrentUser, signOut } from './leanCloud';\nimport 'normalize.css';\nimport './reset.css';\nimport './App.css';\n\nclass App extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: '',\n      todoList: []\n    }\n  }\n  render(){\n    let todos = this.state.todoList\n      .filter((item)=> !item.deleted)\n      .map((item,index)=>{\n      return (\n        <li key={index}>\n          <TodoItem todo={item} onToggle={this.toggle.bind(this)} \n            onDelete={this.delete.bind(this)} />\n        </li>\n      )\n    })\n    return (\n      <div className=\"App\">\n        <h1>{this.state.user.username || '我'}的待办\n          {this.state.user.id ? <button onClick={this.signOut.bind(this)}>登出</button> : null}\n        </h1>\n        <TodoInput content={this.state.newTodo} \n          onChange={this.changeTitle.bind(this)}\n          onSubmit={this.addTodo.bind(this)} />\n        <ol className=\"todoList\">\n          {todos}\n        </ol>\n        {this.state.user.id ? null : <UserDialog onSignUp={this.onSignUpOrSignIn.bind(this)} onSignIn={this.onSignUpOrSignIn.bind(this)} />}\n      </div>\n    );\n  }\n  componentDidUpdate(){\n  }\n  signOut(){\n    signOut()\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = {}\n    this.setState(stateCopy)\n  }\n  onSignUpOrSignIn(user){\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = user\n    this.setState(stateCopy)\n  }\n  toggle(event, todo){\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    this.setState(this.state)\n  }\n  delete(event, todo){\n    todo.deleted = true\n    this.setState(this.state)\n  }\n  changeTitle(event){\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    })\n  }\n  addTodo(event){\n    this.state.todoList.push({\n      id: idMaker(),\n      title: event.target.value,\n      status: null,\n      deleted: false\n    })\n    this.setState({\n      newTodo: '',\n      todoList: this.state.todoList\n    })\n  }\n}\n\nexport default App;\n\nlet id = 0\nfunction idMaker(){\n  id += 1\n  return id\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}